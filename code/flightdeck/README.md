# FlightDeck Project (Refactored Layout)

This project is organized into two main areas of code: **generated** and **src**.

## Folders

- **generated/**  
  Auto-generated by EEZ Studio (LVGL). Do not edit manually — these files are re-created whenever the UI is exported.  
  Includes:
  - `ui.c/.h`
  - `screens.c/.h`
  - `ui_*.c` (any image/font assets)
  - `images.c/.h`
  - `fonts.h`
  - `styles.c/.h`
  - `vars.h`
  - `structs.h`
  - `actions.h`
  - (and any other EEZ Studio outputs)

- **src/**  
  Hand-written drivers and integration code. These should remain stable across UI regenerations.  
  Contents include:
  - LCD display driver(s)
  - Touchscreen driver(s)
  - SPAD.neXt serial communication (`SpadNextSerial.*`)
  - `FocusRouter.*`
  - `actions.c` (bridges UI callbacks to C++)
  - `spad_actions.*` (extern "C" wrappers)
  - `ui_helpers.*` (centralized UI rendering helpers)
  - `config.h` (project-wide settings and feature flags)
  - Other supporting code

- **flightdeck.ino**  
  Arduino entry point (setup/loop). Should be kept minimal — primarily orchestrates initialization.

## Notes

- All includes referencing generated files should use the path form:  
  ```c
  #include "generated/filename.h"
  ```

- To regenerate the UI: run EEZ Studio export and replace everything under `generated/`. Do not touch `src/` code.

- Additions like `ui_helpers.h/.cpp` and `config.h` provide consistency and centralize shared logic.

## Regeneration Checklist

1. Open the project in **EEZ Studio** and export the UI code.  
2. Replace everything inside the `generated/` folder with the newly exported files.  
3. Recompile the project.  
4. Run the firmware and check logs from `FocusRouter`:  
   - It will warn if any reference rectangles no longer match the actual UI object positions/sizes.  
   - Update the `FocusRouter` table accordingly.  
5. Confirm that all LVGL action callbacks begin with:  
   ```c
   if (!ui_guard(e)) return;
   ```  
   This ensures consistent debouncing and event handling.  
6. Verify that `ui_helpers.*` is still correctly rendering button states.  
7. Commit the regenerated `generated/` files separately from changes in `src/` so that hand-written code remains clear.

---

This README was auto-created as part of the refactor to document the new structure.
